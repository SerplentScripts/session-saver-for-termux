<!DOCTYPE html>
    <html lang="en">
        <head>
        <meta charset="UTF-8">
            <title>something</title>
<script type="text/javascript">
</script>
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Hammersmith+One|Open+Sans:400,600">
            <link rel="stylesheet" href="app.css">
        <meta name="twitter:card" content="summary">
            <meta name="twitter:site" content="@ZOMBSio">
                <meta name="og:title" content="ZOMBS.io | Build. Defend. Survive.">
                    <meta name="og:description" content="Play ZOMBS.io - a new Zombie tower defense game. Build your base and defend it against zombies at night!">
                        </head>

<body>
                        <div id="hud-intro" class="hud-intro">
                            <div class="hud-intro-wrapper">
                                <h1>ZOMBS<small>.io</small></h1>
                                    <h2>Build. Defend. Survive.</h2>
<div class="hud-intro-main">
    <div class="hud-intro-left">
        <div class="session_saver" style="margin:0 0 20px;">

</script>
</div>
</div>
<div class="hud-intro-form">
    <input type="text" class="hud-intro-name" maxlength="29" placeholder="Your nickname...">
    <select class="hud-intro-server">
        <optgroup label="US East">
        <option value="v1001">US East #1 [null]</option>
        <option value="v1002">US East #2 [null]</option>
        <option value="v1003">US East #3 [null]</option>
        <option value="v1004">US East #4 [null]</option>
        <option value="v1005">US East #5 [null]</option>
        <option value="v1006">US East #6 [null]</option>
        <option value="v1007">US East #7 [null]</option>
        <option value="v1008">US East #8 [null]</option>
        </optgroup>
        <optgroup label="US West">
        <option value="v2001">US West #1 [null]</option>
        <option value="v2002">US West #2 [null]</option>
        <option value="v2003">US West #3 [null]</option>
        </optgroup>
        <optgroup label="Europe">
        <option value="v5001" selected>Europe #1 [null]</option>
        <option value="v5002">Europe #2 [null]</option>
        <option value="v5003">Europe #3 [null]</option>
        <option value="v5004">Europe #4 [null]</option>
        <option value="v5005">Europe #5 [null]</option>
        <option value="v5006">Europe #6 [null]</option>
        <option value="v5007">Europe #7 [null]</option>
        </optgroup>
        <optgroup label="Asia">
        <option value="v3001">Asia #1 [null]</option>
        </optgroup>
        <optgroup label="Australia">
        <option value="v4001">Australia #1 [null]</option>
        <option value="v4002">Australia #2 [null]</option>
        </optgroup>
    </select>
<button type="submit" class="btn btn-green hud-intro-play">Play</button>
<button type="submit" class="btn btn-green hud-intro-play">Check Server</button>
<button type="submit" class="btn btn-green hud-intro-play">Send Session</button>
<span class="hud-intro-error"></span>
<label>
    <input type="checkbox" class="hud-intro-canvas" name="canvas" value="true">
        <span>Disable GPU Acceleration</span>
</label>
</div>
<div class="hud-intro-guide">
    <div class="hud-intro-guide-changelog">
        <h3>Essentials</h3>
<ul class="hud-intro-guide-hints">
    <li><span class="hud-intro-guide-icon hud-intro-guide-base"></span> Build a gold stash to establish your base and start defending.</li>
        <li><span class="hud-intro-guide-icon hud-intro-guide-resources"></span> Collect resources with your pickaxe to upgrade your base.</li>
            <li><span class="hud-intro-guide-icon hud-intro-guide-towers"></span> Build towers to defend against zombies.</li>
                <li><span class="hud-intro-guide-icon hud-intro-guide-gold-mine"></span> Build gold mines to generate gold and upgrade your buildings.</li>
                    <li><span class="hud-intro-guide-icon hud-intro-guide-shop"></span> Use the Shop to buy weapons and upgrade them.</li>
                        </ul>
<h3>How to Play</h3>
<p>just learn it from yt.</p>
<h3>Controls</h3>
<ul class="hud-intro-guide-controls">
    <li>Movement: <strong>W, A, S, D</strong></li>
        <li>Turn: <strong>Mouse</strong></li>
            <li>Gather/Attack/Build: <strong>Left-Click</strong></li>
                <li>Unselect: <strong>Esc or Right-Click</strong></li>
                    <li>Auto-Attack: <strong>Space</strong></li>
                        <li>Quick Upgrade: <strong>E</strong></li>
                            <li>Quick Sell: <strong>T</strong></li>
                                <li>Quick Heal: <strong>F</strong></li>
                                    <li>Upgrade All: <strong>Hold Shift or Alt</strong></li>
                                        <li>Cycle Weapons: <strong>Q</strong></li>
                                            <li>Shop Menu: <strong>B</strong></li>
                                                <li>Party Menu: <strong>P</strong></li>
                                                    <li>Other: <strong>Coming Soon...</strong></li>
                                                        </ul>
</div>
</div>
<div class="ad-unit ad-unit-leaderboard ad-unit-leaderboard-atf">
    <div id="ad-leaderboard-1"></div>
</div>
</div>
<div class="hud-intro-corner-top-left">
    <div class="hud-intro-youtuber">
</div>
</div>
<div class="hud-intro-corner-top-right">
    <div class="hud-intro-leaderboard">
        <h3>Top <select name="category" class="hud-intro-leaderboard-category"><option value="wave">Wave</option><option value="score">Score</option></select> For <select name="time" class="hud-intro-leaderboard-time"><option value="24h">Today</option><option value="7d">This Week</option><option value="all">All Time</option></select></h3>
</div>
</div>
<div class="hud-intro-corner-bottom-left">
    <div class="hud-intro-social">
</div>
</div>
<div class="hud-intro-corner-bottom-right">
    <div class="hud-intro-more-games">
</div>
</div>
</div>
<script src="pixi.js"></script>
<script src="app.js"></script>
<script>
    //const notAllowedCharsInHTML = new Map([["<", '&lt;'], [">", '&gt;']]);
    /*const Sanitize = (e) => {
        let text = "";
        for (let i = 0; i < e.length; i++) {
            notAllowedCharsInHTML.has(e[i]) ? text += notAllowedCharsInHTML.get(e[i]) : text += e[i];
        }
        return text;
    }*/
    let isAllowedToGrabLb = false;
    const serverArr = JSON.parse('[["v1001","US East #1","45.76.4.28","zombs-2d4c041c-0.eggs.gg"],["v1002","US East #2","45.77.203.204","zombs-2d4dcbcc-0.eggs.gg"],["v1003","US East #3","45.77.200.150","zombs-2d4dc896-0.eggs.gg"],["v1004","US East #4","104.156.225.133","zombs-689ce185-0.eggs.gg"],["v1005","US East #5","45.77.149.224","zombs-2d4d95e0-0.eggs.gg"],["v1006","US East #6","173.199.123.77","zombs-adc77b4d-0.eggs.gg"],["v1007","US East #7","45.76.166.32","zombs-2d4ca620-0.eggs.gg"],["v1008","US East #8","149.28.58.193","zombs-951c3ac1-0.eggs.gg"],["v2001","US West #1","149.28.87.132","zombs-951c5784-0.eggs.gg"],["v2002","US West #2","45.76.68.210","zombs-2d4c44d2-0.eggs.gg"],["v2003","US West #3","108.61.219.244","zombs-6c3ddbf4-0.eggs.gg"],["v5001","Europe #1","80.240.19.5","zombs-50f01305-0.eggs.gg"],["v5002","Europe #2","45.77.53.65","zombs-2d4d3541-0.eggs.gg"],["v5003","Europe #3","95.179.167.12","zombs-5fb3a70c-0.eggs.gg"],["v5004","Europe #4","95.179.163.97","zombs-5fb3a361-0.eggs.gg"],["v5005","Europe #5","136.244.83.44","zombs-88f4532c-0.eggs.gg"],["v5006","Europe #6","45.32.158.210","zombs-2d209ed2-0.eggs.gg"],["v5007","Europe #7","95.179.169.17","zombs-5fb3a911-0.eggs.gg"],["v3001","Asia #1","45.77.249.75","zombs-2d4df94b-0.eggs.gg"],["v4001","Australia #1","149.28.182.161","zombs-951cb6a1-0.eggs.gg"],["v4002","Australia #2","149.28.165.199","zombs-951ca5c7-0.eggs.gg"]]').map(e => ({id: e[0], name: e[1], region: e[1].split(" #")[0], hostname: e[2], players: 0, leaderboard: [], host: e[3]}));
    const serverObj = {};
    serverArr.forEach(e => {
        serverObj[e.id] = {id: e.id, region: e.region, name: e.name, hostname: e.host, ipAddress: e.hostname, port: 443, fallbackPort: 443, selected: false, leaderboardDataObj: [{"name":"Anonymous","uid":0,"rank":0,"score":0,"wave":0}]};
    });
    const game = new Game({ stage: 'prod', servers: serverObj, userGroup: 2 });
    game.init(function() {
        game.debug.init();
        document.getElementsByClassName("hud-intro-play")[1].onclick = () => {
            if (!isAllowedToGrabLb && !localStorage.isxyzAllowed) return;
            window.wsTypeLb(document.getElementsByClassName("hud-intro-server")[0].value);
        };
        document.getElementsByClassName("hud-intro-corner-top-right")[0].style.display = "none";
        document.getElementsByClassName("hud-intro-guide")[0].style.width = "500px";
        document.getElementsByClassName("hud-intro-guide")[0].innerHTML = `
<select class='btn dropdown'>
        <option>Localhost</option>
    </select>
<select class='btn dropdown'>
</select>
<select class='btn dropdown'>
</select>
<button class="btn" onclick='changeSession()'>Change Server</button>
<p class="savedsessions"></p>
`;
        let alp = ["", "K", "M", "B", "T", "Q"];
        let counter = (value = 0) => {
            return length = (value).toLocaleString().split(",").length - 1, v = (value / `1e${length * 3}`).toFixed(2) - "" + alp[length], n = !v ? "LIMIT" : isNaN(v - "") ? v: v - "";
        };

        autoreconnectr = () => {
            window.autoreconnect = !window.autoreconnect;
            window.autoreconnect ?
                document.getElementsByClassName("reconnect")[1].innerText = document.getElementsByClassName("reconnect")[1].innerText.replace("Enable", "Disable") :
            document.getElementsByClassName("reconnect")[1].innerText = document.getElementsByClassName("reconnect")[1].innerText.replace("Disable", "Enable");
            window.autoreconnect ?
                document.getElementsByClassName("hud-FPS-restart-walkthrough")[6].innerText = document.getElementsByClassName("hud-FPS-restart-walkthrough")[6].innerText.replace("Enable", "Disable") :
            document.getElementsByClassName("hud-FPS-restart-walkthrough")[6].innerText = document.getElementsByClassName("hud-FPS-restart-walkthrough")[6].innerText.replace("Disable", "Enable");
            window.autoreconnect ?
                document.getElementsByClassName("hud-FPS-restart-walkthrough")[6].className = document.getElementsByClassName("hud-FPS-restart-walkthrough")[6].className.replace("green", "red") :
            document.getElementsByClassName("hud-FPS-restart-walkthrough")[6].className = document.getElementsByClassName("hud-FPS-restart-walkthrough")[6].className.replace("red", "green");
        }
    });
    
    let e_PacketId = {"0":"PACKET_ENTITY_UPDATE","1":"PACKET_PLAYER_COUNTER_UPDATE","2":"PACKET_SET_WORLD_DIMENSIONS","3":"PACKET_INPUT","4":"PACKET_ENTER_WORLD","5":"PACKET_PRE_ENTER_WORLD","6":"PACKET_ENTER_WORLD2","7":"PACKET_PING","9":"PACKET_RPC","PACKET_ENTITY_UPDATE":0,"PACKET_PLAYER_COUNTER_UPDATE":1,"PACKET_SET_WORLD_DIMENSIONS":2,"PACKET_INPUT":3,"PACKET_ENTER_WORLD":4,"PACKET_PRE_ENTER_WORLD":5,"PACKET_ENTER_WORLD2":6,"PACKET_PING":7,"PACKET_RPC":9};
    let jsons = [
        {name: 'BuildingShopPrices', response: {json: '[{"Name":"Wall","Class":"PlayerObject","GoldCosts":[0,5,30,60,80,100,250,800],"WoodCosts":[2,0,0,0,0,0,0,0],"StoneCosts":[0,2,0,0,0,0,0,0],"TokenCosts":[0,0,0,0,0,0,0,0],"Width":47.99,"Height":47.99,"Health":[150,200,300,400,600,800,1500,2500],"MsBeforeRegen":[10000,10000,10000,10000,10000,10000,10000,10000],"HealthRegenPerSecond":[5,7,12,17,25,40,80,250]},{"Name":"GoldStash","Class":"GoldStash","GoldCosts":[0,5000,10000,16000,20000,32000,100000,400000],"WoodCosts":[0,0,0,0,0,0,0,0],"StoneCosts":[0,0,0,0,0,0,0,0],"TokenCosts":[0,0,0,0,0,0,0,0],"Width":95.99,"Height":95.99,"Health":[1500,1800,2300,3000,5000,8000,12000,20000],"MsBeforeRegen":[10000,10000,10000,10000,10000,10000,10000,10000],"HealthRegenPerSecond":[50,60,70,90,110,150,400,700]},{"Name":"GoldMine","Class":"GoldMine","GoldCosts":[0,200,300,600,800,1200,8000,30000],"WoodCosts":[5,15,25,35,45,55,700,1600],"StoneCosts":[5,15,25,35,45,55,700,1600],"TokenCosts":[0,0,0,0,0,0,0,0],"Width":95.99,"Height":95.99,"Health":[150,250,350,500,800,1400,1800,2800],"GoldPerSecond":[4,6,7,10,12,15,25,35],"MsBeforeRegen":[10000,10000,10000,10000,10000,10000,10000,10000],"HealthRegenPerSecond":[5,7,12,17,25,40,70,120]},{"Name":"Door","Class":"Door","GoldCosts":[0,10,50,70,150,200,400,800],"WoodCosts":[5,5,0,0,0,0,0,0],"StoneCosts":[5,5,0,0,0,0,0,0],"TokenCosts":[0,0,0,0,0,0,0,0],"Width":47.99,"Height":47.99,"Health":[150,200,300,500,700,1000,1500,2000],"MsBeforeRegen":[10000,10000,10000,10000,10000,10000,10000,1000],"HealthRegenPerSecond":[5,7,12,17,25,40,70,100]},{"Name":"CannonTower","Class":"Tower","GoldCosts":[0,100,200,600,1200,2000,8000,35000],"WoodCosts":[15,25,30,40,60,80,300,800],"StoneCosts":[15,25,40,50,80,120,300,800],"TokenCosts":[0,0,0,0,0,0,0,0],"TowerRadius":[500,500,500,500,600,600,600,600],"MsBetweenFires":[1000,769,625,500,400,350,250,250],"Height":95.99,"Width":95.99,"Health":[150,200,400,800,1200,1600,2200,3600],"MsBeforeRegen":[10000,10000,10000,10000,10000,10000,10000,10000],"HealthRegenPerSecond":[2,5,10,20,40,80,110,150],"DamageToZombies":[20,30,50,70,120,150,200,300],"DamageToPlayers":[5,5,6,6,7,7,8,8],"DamageToPets":[5,5,5,5,5,5,6,8],"DamageToNeutrals":[250,350,450,550,650,750,850,1000],"ProjectileLifetime":[1000,1000,1000,1000,1000,1000,1000,1000],"ProjectileVelocity":[60,65,70,70,75,80,100,140],"ProjectileName":"CannonProjectile","ProjectileAoe":[true,true,true,true,true,true,true,true],"ProjectileAoeRadius":[250,250,250,250,250,250,250,250],"ProjectileCollisionRadius":[10,10,10,10,10,10,10,10]},{"Name":"ArrowTower","Class":"ArrowTower","GoldCosts":[0,100,200,600,1200,2000,8000,35000],"WoodCosts":[5,25,30,40,50,70,300,800],"StoneCosts":[5,20,30,40,60,80,300,800],"TokenCosts":[0,0,0,0,0,0,0,0],"TowerRadius":[600,650,700,750,800,850,900,1000],"MsBetweenFires":[400,333,285,250,250,250,250,250],"Height":95.99,"Width":95.99,"Health":[150,200,400,800,1200,1600,2200,3600],"MsBeforeRegen":[10000,10000,10000,10000,10000,10000,10000,10000],"HealthRegenPerSecond":[2,5,10,20,40,80,110,150],"DamageToZombies":[20,40,70,120,180,250,400,500],"DamageToPlayers":[5,5,6,6,7,7,8,8],"DamageToPets":[5,5,5,5,5,5,6,6],"DamageToNeutrals":[250,350,450,550,650,750,850,1000],"ProjectileLifetime":[1300,1300,1300,1300,1300,1300,1300,1300],"ProjectileVelocity":[60,65,70,70,75,80,120,140],"ProjectileName":"ArrowProjectile","ProjectileAoe":[false,false,false,false,false,false,false,false],"ProjectileCollisionRadius":[10,10,10,10,10,10,10,10]},{"Name":"Harvester","Class":"Harvester","GoldCosts":[0,100,200,600,1200,2000,8000,10000],"WoodCosts":[5,25,30,40,50,70,300,600],"StoneCosts":[5,20,30,40,60,80,300,600],"TokenCosts":[0,0,0,0,0,0,0,0],"Height":95.99,"Width":95.99,"Health":[150,200,400,800,1200,1600,2200,2800],"MsBeforeRegen":[10000,10000,10000,10000,10000,10000,10000,10000],"HealthRegenPerSecond":[2,5,10,20,40,80,110,130],"HarvestAmount":[2.5,4.65,4.55,7.2,8.25,10,13.5,16],"HarvestCooldown":[1500,1400,1300,1200,1100,1000,900,800],"HarvestMax":[400,800,1200,1600,2000,2400,2800,3600],"HarvestRange":[300,300,300,300,300,300,300,300],"DepositCostPerMinute":[200,300,350,500,600,700,1200,1400],"DepositMax":[800,1200,1400,2000,2400,2800,4800,6000],"MaxYawDeviation":[70,70,70,70,70,70,70,70]},{"Name":"BombTower","Class":"Tower","GoldCosts":[0,100,200,600,1200,2000,8000,35000],"WoodCosts":[10,25,40,50,80,120,300,800],"StoneCosts":[10,25,40,50,80,120,300,800],"TokenCosts":[0,0,0,0,0,0,0,0],"TowerRadius":[1000,1000,1000,1000,1000,1000,1000,1000],"MsBetweenFires":[1000,1000,1000,1000,1000,1000,900,900],"Height":95.99,"Width":95.99,"Health":[150,200,400,800,1200,1600,2200,3600],"MsBeforeRegen":[10000,10000,10000,10000,10000,10000,10000,10000],"HealthRegenPerSecond":[2,5,10,20,40,80,110,150],"DamageToZombies":[30,60,100,140,200,600,1200,1600],"DamageToPlayers":[9,9,10,10,11,11,12,12],"DamageToPets":[10,10,10,10,10,10,10,10],"DamageToNeutrals":[250,350,450,550,650,750,850,1000],"ProjectileLifetime":[1000,1000,1000,1000,1000,1000,1000,1000],"ProjectileVelocity":[20,20,20,20,20,20,20,20],"ProjectileName":"BombProjectile","ProjectileAoe":[true,true,true,true,true,true,true,true],"ProjectileIgnoresCollisions":[true,true,true,true,true,true,true,true],"ProjectileAoeRadius":[250,250,250,250,250,250,250,250],"ProjectileCollisionRadius":[10,10,10,10,10,10,10,10],"ProjectileMaxRange":[1000,1000,1000,1000,1000,1000,1000,1000]},{"Name":"MagicTower","Class":"MagicTower","GoldCosts":[0,100,200,600,1200,2000,8000,35000],"WoodCosts":[15,25,40,50,70,100,300,800],"StoneCosts":[15,25,40,50,70,100,300,800],"TokenCosts":[0,0,0,0,0,0,0,0],"TowerRadius":[400,400,400,400,400,400,400,400],"MsBetweenFires":[800,800,700,600,500,400,300,300],"Height":95.99,"Width":95.99,"Health":[150,200,400,800,1200,1600,2200,3600],"MsBeforeRegen":[10000,10000,10000,10000,10000,10000,10000,10000],"HealthRegenPerSecond":[2,5,10,20,40,80,110,150],"DamageToZombies":[10,20,40,50,70,80,120,160],"DamageToPlayers":[5,5,5,6,6,6,7,7],"DamageToPets":[5,5,5,5,5,5,5,5],"DamageToNeutrals":[250,350,450,550,650,750,850,1000],"ProjectileLifetime":[500,500,500,500,500,500,500,500],"ProjectileVelocity":[45,45,45,45,45,45,45,45],"ProjectileName":"FireballProjectile","ProjectileAoe":[true,true,true,true,true,true,true,true],"ProjectileAoeRadius":[100,100,100,100,100,100,100,100],"ProjectileCollisionRadius":[10,10,10,10,10,10,10,10]},{"Name":"MeleeTower","Class":"MeleeTower","GoldCosts":[0,100,200,600,1200,2000,8000,35000],"WoodCosts":[10,25,30,40,50,70,300,800],"StoneCosts":[10,20,30,40,60,80,300,800],"TokenCosts":[0,0,0,0,0,0,0,0],"TowerRadius":[110,110,110,110,110,110,110,110],"MsBetweenFires":[400,333,285,250,250,250,250,250],"Height":95.99,"Width":95.99,"Health":[200,400,800,1200,1600,2200,4000,9000],"MsBeforeRegen":[10000,10000,10000,10000,10000,10000,10000,10000],"HealthRegenPerSecond":[2,5,10,20,40,80,220,350],"DamageToZombies":[80,120,200,280,500,1000,2000,3000],"DamageToPlayers":[5,6,7,8,9,10,11,12],"DamageToPets":[5,5,5,5,5,5,6,6],"DamageToNeutrals":[250,350,450,550,650,750,850,1000],"MaxYawDeviation":[30,30,30,30,30,30,30,30]},{"Name":"SlowTrap","Class":"Trap","GoldCosts":[0,100,200,400,600,800,1000,1500],"WoodCosts":[5,25,30,40,50,70,300,800],"StoneCosts":[5,20,30,40,60,80,300,800],"TokenCosts":[0,0,0,0,0,0,0,0],"Height":47.99,"Width":47.99,"Health":[150,200,400,800,1200,1600,2200,3000],"MsBeforeRegen":[10000,10000,10000,10000,10000,10000,10000,10000],"HealthRegenPerSecond":[2,5,10,20,40,80,110,150],"SlowDuration":[2500,2500,2500,3000,3000,3250,3500,4000],"SlowAmount":[0.4,0.45,0.5,0.55,0.6,0.65,0.7,0.7]}]'}, opcode: 9},
        {name: 'ItemShopPrices', response: {json: '[{"Name":"Spear","Class":"MeleeWeapon","MsBetweenFires":[250,250,250,250,250,250,250],"DamageToZombies":[30,80,120,300,2000,8000,10000],"DamageToNeutrals":[50,80,100,200,250,400,600],"DamageToBuildings":[0.75,1.5,2.25,3,3.75,4.5,5.25],"DamageToPlayers":[15,16,17,18,20,22,22],"DamageToPets":[3,3.5,4,4.5,5,5.5,5.5],"GoldCosts":[1400,2800,5600,11200,22500,45000,90000],"StoneCosts":[0,0,0,0,0,0,0],"WoodCosts":[0,0,0,0,0,0,0],"TokenCosts":[0,0,0,0,0,0,0],"Range":[100,100,100,100,100,100,100],"MaxYawDeviation":[50,50,50,50,50,50,50]},{"Name":"Pickaxe","Class":"MeleeWeapon","MsBetweenFires":[300,300,285,250,200,200,200],"DamageToZombies":[20,20,20,20,20,20,20],"DamageToBuildings":[0,0,0,0,0,0,0],"DamageToPlayers":[0,0,0,0,0,0,0],"DamageToNeutrals":[10,10,10,10,10,10,10],"DamageToPets":[0,0,0,0,0,0,0],"GoldCosts":[0,1000,3000,6000,8000,24000,90000],"StoneCosts":[0,0,0,0,0,0,0],"WoodCosts":[0,0,0,0,0,0,0],"TokenCosts":[0,0,0,0,0,0,0],"Range":[100,100,100,100,100,100,100],"MaxYawDeviation":[70,70,70,70,70,70,70],"IsTool":true,"HarvestCount":[1,2,2,3,3,4,6]},{"Name":"Bow","Class":"RangedWeapon","DamageToZombies":[20,40,100,300,2400,10000,14000],"DamageToBuildings":[2,2.3,2.5,2.7,3,3,3],"DamageToPlayers":[22,24,26,28,30,32,32],"DamageToNeutrals":[50,100,150,200,250,400,700],"DamageToPets":[2,2.3,2.5,2.7,3,3,3],"GoldCosts":[100,400,2000,7000,24000,30000,90000],"StoneCosts":[0,0,0,0,0,0,0],"WoodCosts":[0,0,0,0,0,0,0],"TokenCosts":[0,0,0,0,0,0,0],"MsBetweenFires":[500,500,500,500,500,500,500],"ChargeTime":[150,150,150,150,150,150,150],"ProjectileVelocity":[100,100,100,100,100,100,100],"ProjectileName":"BowProjectile","ProjectileCollisionRadius":[10,10,10,10,10,10,10],"ProjectileLifetime":[550,550,550,550,550,550,550]},{"Name":"Bomb","Class":"RangedWeapon","GoldCosts":[100,400,3000,5000,24000,30000,90000],"DamageToNeutrals":[50,100,150,200,250,300,500],"StoneCosts":[0,0,0,0,0,0,0],"WoodCosts":[0,0,0,0,0,0,0],"TokenCosts":[0,0,0,0,0,0,0],"MsBetweenFires":[500,500,500,500,500,500,500],"DamageToZombies":[10,30,80,150,1200,6000,9000],"DamageToBuildings":[1,1,1,1,1,1,1],"DamageToPlayers":[20,22,24,26,28,30,30],"DamageToPets":[1,1,1,1,1,1,1],"ProjectileVelocity":[40,40,40,40,40,40,40],"ProjectileName":"BombProjectile","ProjectileCollisionRadius":[10,10,10,10,10,10,10],"ProjectileLifetime":[700,700,700,700,700,700,700],"ProjectileAoe":[true,true,true,true,true,true,true],"ProjectileAoeRadius":[50,50,50,50,50,50,50],"ProjectileIgnoresCollisions":[false,false,false,false,false,false,false],"ProjectileMaxRange":[700,700,700,700,700,700,700]},{"Name":"HealthPotion","Class":"HealthPotion","GoldCosts":[100],"StoneCosts":[0],"WoodCosts":[0],"TokenCosts":[0],"PurchaseCooldown":15000},{"Name":"ZombieShield","Class":"ZombieShield","GoldCosts":[1000,3000,7000,14000,18000,22000,24000,30000,45000,70000],"StoneCosts":[0,0,0,0,0,0,0,0,0,0],"WoodCosts":[0,0,0,0,0,0,0,0,0,0],"TokenCosts":[0,0,0,0,0,0,0,0,0,0],"Health":[500,1000,1800,4000,10000,20000,35000,50000,65000,85000],"RechargePerSecond":[50,100,200,400,1000,2000,3500,5000,6500,8500],"MsBeforeRecharge":[10000,9000,8000,7000,6000,6000,6000,6000,6000,6000]},{"Name":"Pause","Class":"Pause","GoldCosts":[10000],"StoneCosts":[0],"WoodCosts":[0],"TokenCosts":[0],"PurchaseCooldown":240000},{"Name":"PetMiner","Class":"Pet","GoldCosts":[0,0,0,0,0,0,0,0],"WoodCosts":[0,0,0,0,0,0,0,0],"StoneCosts":[0,0,0,0,0,0,0,0],"TokenCosts":[0,100,100,100,100,200,200,300],"CollisionRadius":25,"Health":[400,800,1500,3000,5000,8000,10000,16000],"MsBeforeRegen":[8000,8000,8000,8000,8000,8000,8000,8000],"HealthRegenPerSecond":[5,5,5,5,5,5,5,5],"Speed":[30,32,34,35,35,37,37,38],"DamageToNeutrals":[80,100,150,200,250,400,500,600],"HarvestCount":[1,1,2,2,3,3,4,4],"Ranged":[false,false,false,false,false,false,false,false],"CanAttackPlayers":[false,false,false,false,false,false,false,false],"CanMine":[true,true,true,true,true,true,true,true],"LeashRange":[500,500,500,500,500,500,500,500],"HarvestLeashRange":[0,0,0,0,0,0,0,0],"AttackRange":[80,80,80,80,80,80,80,80],"MsBetweenFires":[500,450,450,400,400,380,380,350],"EvolvesAtLevel":[0,8,16,24,32,48,64,96],"ExperienceFromMiningPerHalfSecond":[1,1,1,1,1,1,1,1]},{"Name":"PetCARL","Class":"Pet","GoldCosts":[0,0,0,0,0,0,0,0],"WoodCosts":[0,0,0,0,0,0,0,0],"StoneCosts":[0,0,0,0,0,0,0,0],"TokenCosts":[0,100,100,100,100,200,200,300],"CollisionRadius":25,"Health":[400,800,1500,3000,5000,8000,10000,16000],"MsBeforeRegen":[8000,8000,8000,8000,8000,8000,8000,8000],"HealthRegenPerSecond":[5,5,5,5,5,5,5,5],"Speed":[30,32,34,35,35,37,37,38],"DamageToNeutrals":[80,100,150,200,250,400,500,600],"Ranged":[false,false,false,false,false,false,false,false],"CanAttackPlayers":[true,true,true,true,true,true,true,true],"LeashRange":[500,500,500,500,500,500,500,500],"AttackRange":[80,80,80,80,80,80,80,80],"MsBetweenFires":[500,490,490,490,480,480,470,470],"ProjectileLifetime":[1000,1000,1000,1000,1000,1000,1000,1000],"ProjectileVelocity":[60,60,60,60,60,60,60,60],"ProjectileName":"PetCARLProjectile","ProjectileAoe":[true,true,true,true,true,true,true,true],"ProjectileAoeRadius":[250,250,250,250,250,250,250,250],"ProjectileCollisionRadius":[10,10,10,10,10,10,10,10],"DamageToZombies":[30,100,400,600,1000,3000,6000,8000],"DamageToPlayers":[30,31,32,33,34,35,36,37],"DamageToBuildings":[2,2,2,3,3,3,4,4],"EvolvesAtLevel":[0,8,16,24,32,48,64,96],"ExperienceFromZombies":[30,28,25,25,25,25,25,25],"ExperienceFromNeutrals":[30,28,25,25,25,25,25,25]},{"Name":"HatHorns","Class":"Hat","GoldCosts":[0],"WoodCosts":[0],"StoneCosts":[0],"TokenCosts":[0]},{"Name":"PetHealthPotion","Class":"PetHealthPotion","GoldCosts":[100],"StoneCosts":[0],"WoodCosts":[0],"TokenCosts":[0]},{"Name":"PetWhistle","Class":"PetWhistle","GoldCosts":[0],"StoneCosts":[0],"WoodCosts":[0],"TokenCosts":[0]},{"Name":"PetRevive","Class":"PetRevive","GoldCosts":[0],"StoneCosts":[0],"WoodCosts":[0],"TokenCosts":[0]}]'}, opcode: 9},
        {name: 'Spells', response: {json: '[{"Name":"HealTowersSpell","VisualLifetime":10000,"VisualRadius":600,"Cooldown":[240000],"IsCooldownForParty":true,"Healing":[{"Type":"Tower","Amount":[50],"Over":[10000],"Radius":[600]}],"GoldCosts":[1000],"WoodCosts":[0],"StoneCosts":[0],"TokenCosts":[0]}]'}, opcode: 9}
    ];
    let codecJSON = '{"attributeMaps":{"667546015":[{"name":"position","type":5},{"name":"yaw","type":2},{"name":"health","type":3},{"name":"maxHealth","type":3},{"name":"damage","type":3},{"name":"height","type":3},{"name":"width","type":3},{"name":"collisionRadius","type":1},{"name":"model","type":4},{"name":"entityClass","type":4},{"name":"dead","type":1},{"name":"timeDead","type":3},{"name":"slowed","type":1},{"name":"stunned","type":1},{"name":"tier","type":1},{"name":"partyId","type":1},{"name":"lastPetDamage","type":3},{"name":"lastPetDamageTick","type":1},{"name":"lastPetDamageTarget","type":1},{"name":"firingTick","type":1},{"name":"experience","type":1},{"name":"stoneGain","type":3},{"name":"woodGain","type":3},{"name":"stoneGainTick","type":1},{"name":"woodGainTick","type":1}],"742594995":[{"name":"position","type":5},{"name":"yaw","type":2},{"name":"health","type":3},{"name":"maxHealth","type":3},{"name":"damage","type":3},{"name":"height","type":3},{"name":"width","type":3},{"name":"collisionRadius","type":1},{"name":"model","type":4},{"name":"entityClass","type":4},{"name":"dead","type":1},{"name":"timeDead","type":3},{"name":"slowed","type":1},{"name":"stunned","type":1},{"name":"tier","type":1},{"name":"partyId","type":1}],"1059671174":[{"name":"position","type":5},{"name":"yaw","type":2},{"name":"health","type":3},{"name":"maxHealth","type":3},{"name":"damage","type":3},{"name":"height","type":3},{"name":"width","type":3},{"name":"collisionRadius","type":1},{"name":"model","type":4},{"name":"entityClass","type":4},{"name":"dead","type":1},{"name":"timeDead","type":3},{"name":"slowed","type":1},{"name":"stunned","type":1},{"name":"firingTick","type":1},{"name":"lastDamagedTick","type":1}],"1372600389":[{"name":"position","type":5},{"name":"yaw","type":2},{"name":"health","type":3},{"name":"maxHealth","type":3},{"name":"damage","type":3},{"name":"height","type":3},{"name":"width","type":3},{"name":"collisionRadius","type":1},{"name":"model","type":4},{"name":"entityClass","type":4},{"name":"dead","type":1},{"name":"timeDead","type":3},{"name":"slowed","type":1},{"name":"stunned","type":1},{"name":"hits","type":8}],"1496910567":[{"name":"position","type":5},{"name":"yaw","type":2},{"name":"health","type":3},{"name":"maxHealth","type":3},{"name":"damage","type":3},{"name":"height","type":3},{"name":"width","type":3},{"name":"collisionRadius","type":1},{"name":"model","type":4},{"name":"entityClass","type":4},{"name":"dead","type":1},{"name":"timeDead","type":3},{"name":"slowed","type":1},{"name":"stunned","type":1},{"name":"firingTick","type":1}],"1566069472":[{"name":"position","type":5},{"name":"yaw","type":2},{"name":"health","type":3},{"name":"maxHealth","type":3},{"name":"damage","type":3},{"name":"height","type":3},{"name":"width","type":3},{"name":"collisionRadius","type":1},{"name":"model","type":4},{"name":"entityClass","type":4},{"name":"dead","type":1},{"name":"timeDead","type":3},{"name":"slowed","type":1},{"name":"stunned","type":1},{"name":"tier","type":1},{"name":"partyId","type":1}],"1672634632":[{"name":"position","type":5},{"name":"yaw","type":2},{"name":"health","type":3},{"name":"maxHealth","type":3},{"name":"damage","type":3},{"name":"height","type":3},{"name":"width","type":3},{"name":"collisionRadius","type":1},{"name":"model","type":4},{"name":"entityClass","type":4},{"name":"dead","type":1},{"name":"timeDead","type":3},{"name":"slowed","type":1},{"name":"stunned","type":1}],"1816895259":[{"name":"position","type":5},{"name":"yaw","type":2},{"name":"health","type":3},{"name":"maxHealth","type":3},{"name":"damage","type":3},{"name":"height","type":3},{"name":"width","type":3},{"name":"collisionRadius","type":1},{"name":"model","type":4},{"name":"entityClass","type":4},{"name":"dead","type":1},{"name":"timeDead","type":3},{"name":"slowed","type":1},{"name":"stunned","type":1}],"2092990061":[{"name":"position","type":5},{"name":"yaw","type":2},{"name":"health","type":3},{"name":"maxHealth","type":3},{"name":"damage","type":3},{"name":"height","type":3},{"name":"width","type":3},{"name":"collisionRadius","type":1},{"name":"model","type":4},{"name":"entityClass","type":4},{"name":"dead","type":1},{"name":"timeDead","type":3},{"name":"slowed","type":1},{"name":"stunned","type":1},{"name":"tier","type":1},{"name":"partyId","type":1}],"2093252446":[{"name":"position","type":5},{"name":"yaw","type":2},{"name":"health","type":3},{"name":"maxHealth","type":3},{"name":"damage","type":3},{"name":"height","type":3},{"name":"width","type":3},{"name":"collisionRadius","type":1},{"name":"model","type":4},{"name":"entityClass","type":4},{"name":"dead","type":1},{"name":"timeDead","type":3},{"name":"slowed","type":1},{"name":"stunned","type":1},{"name":"hits","type":8}],"2347737811":[{"name":"position","type":5},{"name":"yaw","type":2},{"name":"health","type":3},{"name":"maxHealth","type":3},{"name":"damage","type":3},{"name":"height","type":3},{"name":"width","type":3},{"name":"collisionRadius","type":1},{"name":"model","type":4},{"name":"entityClass","type":4},{"name":"dead","type":1},{"name":"timeDead","type":3},{"name":"slowed","type":1},{"name":"stunned","type":1},{"name":"reconnectSecret","type":4},{"name":"name","type":4},{"name":"score","type":13},{"name":"baseSpeed","type":3},{"name":"speedAttribute","type":3},{"name":"availableSkillPoints","type":2},{"name":"experience","type":3},{"name":"level","type":1},{"name":"msBetweenFires","type":3},{"name":"aimingYaw","type":2},{"name":"energy","type":3},{"name":"maxEnergy","type":3},{"name":"energyRegenerationRate","type":3},{"name":"kills","type":2},{"name":"weaponName","type":4},{"name":"weaponTier","type":1},{"name":"firingTick","type":1},{"name":"startChargingTick","type":1},{"name":"stone","type":15},{"name":"wood","type":15},{"name":"gold","type":15},{"name":"token","type":15},{"name":"wave","type":1},{"name":"partyId","type":1},{"name":"zombieShieldHealth","type":3},{"name":"zombieShieldMaxHealth","type":3},{"name":"isPaused","type":1},{"name":"isInvulnerable","type":1},{"name":"lastPetDamage","type":3},{"name":"lastPetDamageTick","type":1},{"name":"lastPetDamageTarget","type":1},{"name":"lastDamage","type":3},{"name":"lastDamageTick","type":1},{"name":"lastDamageTarget","type":1},{"name":"hatName","type":4},{"name":"petUid","type":1},{"name":"isBuildingWalking","type":10}],"2402467733":[{"name":"position","type":5},{"name":"yaw","type":2},{"name":"health","type":3},{"name":"maxHealth","type":3},{"name":"damage","type":3},{"name":"height","type":3},{"name":"width","type":3},{"name":"collisionRadius","type":1},{"name":"model","type":4},{"name":"entityClass","type":4},{"name":"dead","type":1},{"name":"timeDead","type":3},{"name":"slowed","type":1},{"name":"stunned","type":1},{"name":"tier","type":1},{"name":"partyId","type":1}],"2462472648":[{"name":"position","type":5},{"name":"yaw","type":2},{"name":"health","type":3},{"name":"maxHealth","type":3},{"name":"damage","type":3},{"name":"height","type":3},{"name":"width","type":3},{"name":"collisionRadius","type":1},{"name":"model","type":4},{"name":"entityClass","type":4},{"name":"dead","type":1},{"name":"timeDead","type":3},{"name":"slowed","type":1},{"name":"stunned","type":1},{"name":"tier","type":1}],"2464630638":[{"name":"position","type":5},{"name":"yaw","type":2},{"name":"health","type":3},{"name":"maxHealth","type":3},{"name":"damage","type":3},{"name":"height","type":3},{"name":"width","type":3},{"name":"collisionRadius","type":1},{"name":"model","type":4},{"name":"entityClass","type":4},{"name":"dead","type":1},{"name":"timeDead","type":3},{"name":"slowed","type":1},{"name":"stunned","type":1},{"name":"tier","type":1},{"name":"partyId","type":1}],"2899981078":[{"name":"position","type":5},{"name":"yaw","type":2},{"name":"health","type":3},{"name":"maxHealth","type":3},{"name":"damage","type":3},{"name":"height","type":3},{"name":"width","type":3},{"name":"collisionRadius","type":1},{"name":"model","type":4},{"name":"entityClass","type":4},{"name":"dead","type":1},{"name":"timeDead","type":3},{"name":"slowed","type":1},{"name":"stunned","type":1},{"name":"tier","type":1},{"name":"partyId","type":1},{"name":"harvestMax","type":1},{"name":"stone","type":1},{"name":"wood","type":1},{"name":"firingTick","type":1},{"name":"deposit","type":3},{"name":"depositMax","type":3},{"name":"lastHarvestedBy","type":4}],"2969697641":[{"name":"position","type":5},{"name":"yaw","type":2},{"name":"health","type":3},{"name":"maxHealth","type":3},{"name":"damage","type":3},{"name":"height","type":3},{"name":"width","type":3},{"name":"collisionRadius","type":1},{"name":"model","type":4},{"name":"entityClass","type":4},{"name":"dead","type":1},{"name":"timeDead","type":3},{"name":"slowed","type":1},{"name":"stunned","type":1},{"name":"tier","type":1},{"name":"partyId","type":1},{"name":"towerYaw","type":3},{"name":"firingTick","type":1},{"name":"healingTick","type":1}]},"entityTypeNames":{"667546015":"Pet","742594995":"GoldMine","1059671174":"Zombie","1372600389":"Stone","1496910567":"Neutral","1566069472":"PlayerObject","1672634632":"NeutralCamp","1816895259":"GameProjectile","2092990061":"Trap","2093252446":"Tree","2347737811":"GamePlayer","2402467733":"GoldStash","2462472648":"Spell","2464630638":"Door","2899981078":"Harvester","2969697641":"Tower"},"rpcMaps":[{"name":"Shutdown","parameters":[{"name":"reason","type":3},{"name":"shutdownUnix","type":0}],"isArray":false,"index":0},{"name":"ReceiveChatMessage","parameters":[{"name":"displayName","type":3},{"name":"channel","type":3},{"name":"message","type":3},{"name":"uid","type":0}],"isArray":false,"index":1},{"name":"SendChatMessage","parameters":[{"name":"channel","type":3},{"name":"message","type":3}],"isArray":false,"index":2},{"name":"Login","parameters":[{"name":"token","type":3}],"isArray":false,"index":3},{"name":"LoginResponse","parameters":[{"name":"json","type":3}],"isArray":false,"index":4},{"name":"AccountSession","parameters":[{"name":"json","type":3}],"isArray":false,"index":5},{"name":"Metrics","parameters":[{"name":"minFps","type":2},{"name":"maxFps","type":2},{"name":"currentFps","type":2},{"name":"averageFps","type":2},{"name":"framesRendered","type":2},{"name":"framesInterpolated","type":2},{"name":"framesExtrapolated","type":2},{"name":"allocatedNetworkEntities","type":2},{"name":"currentClientLag","type":2},{"name":"minClientLag","type":2},{"name":"maxClientLag","type":2},{"name":"currentPing","type":2},{"name":"minPing","type":2},{"name":"maxPing","type":2},{"name":"averagePing","type":2},{"name":"longFrames","type":2},{"name":"stutters","type":2},{"name":"group","type":0},{"name":"isMobile","type":0},{"name":"timeResets","type":2},{"name":"maxExtrapolationTime","type":2},{"name":"extrapolationIncidents","type":2},{"name":"totalExtrapolationTime","type":2},{"name":"differenceInClientTime","type":2}],"isArray":false,"index":6},{"name":"DayCycle","parameters":[{"name":"cycleStartTick","type":0},{"name":"nightEndTick","type":0},{"name":"dayEndTick","type":0},{"name":"isDay","type":0}],"isArray":false,"index":7},{"name":"MakeBuilding","parameters":[{"name":"x","type":1},{"name":"y","type":1},{"name":"type","type":3},{"name":"yaw","type":1}],"isArray":false,"index":8},{"name":"BuildingShopPrices","parameters":[{"name":"json","type":3}],"isArray":false,"index":9},{"name":"ItemShopPrices","parameters":[{"name":"json","type":3},{"name":"json","type":3}],"isArray":false,"index":10},{"name":"LocalBuilding","parameters":[{"name":"x","type":1},{"name":"y","type":1},{"name":"type","type":3},{"name":"dead","type":0},{"name":"uid","type":0},{"name":"tier","type":0}],"isArray":true,"index":11},{"name":"Dead","parameters":[{"name":"stashDied","type":0}],"isArray":false,"index":12},{"name":"Admin","parameters":[{"name":"password","type":3},{"name":"command","type":3}],"isArray":false,"index":13},{"name":"UpgradeBuilding","parameters":[{"name":"uid","type":0}],"isArray":false,"index":14},{"name":"DeleteBuilding","parameters":[{"name":"uid","type":0}],"isArray":false,"index":15},{"name":"BuyItem","parameters":[{"name":"itemName","type":3},{"name":"tier","type":0}],"isArray":false,"index":16},{"name":"SetItem","parameters":[{"name":"itemName","type":3},{"name":"tier","type":0},{"name":"stacks","type":0}],"isArray":false,"index":17},{"name":"EquipItem","parameters":[{"name":"itemName","type":3},{"name":"tier","type":0}],"isArray":false,"index":18},{"name":"SetOpenParty","parameters":[{"name":"isOpen","type":0}],"isArray":false,"index":19},{"name":"SetPartyName","parameters":[{"name":"partyName","type":3}],"isArray":false,"index":20},{"name":"SetPartyMemberCanSell","parameters":[{"name":"uid","type":0},{"name":"canSell","type":0}],"isArray":false,"index":21},{"name":"JoinParty","parameters":[{"name":"partyId","type":0}],"isArray":false,"index":22},{"name":"JoinPartyByShareKey","parameters":[{"name":"partyShareKey","type":3}],"isArray":false,"index":23},{"name":"PartyApplicant","parameters":[{"name":"displayName","type":3},{"name":"applicantUid","type":0}],"isArray":false,"index":24},{"name":"PartyApplicantDecide","parameters":[{"name":"applicantUid","type":0},{"name":"accepted","type":0}],"isArray":false,"index":25},{"name":"PartyApplicantDenied","parameters":[],"isArray":false,"index":26},{"name":"PartyApplicantExpired","parameters":[{"name":"applicantUid","type":0}],"isArray":false,"index":27},{"name":"PartyShareKey","parameters":[{"name":"partyShareKey","type":3}],"isArray":false,"index":28},{"name":"PartyInfo","parameters":[{"name":"playerUid","type":0},{"name":"displayName","type":3},{"name":"isLeader","type":0},{"name":"canSell","type":0}],"isArray":true,"index":29},{"name":"AddParty","parameters":[{"name":"partyId","type":0},{"name":"partyName","type":3},{"name":"isOpen","type":0},{"name":"memberCount","type":0}],"isArray":false,"index":30},{"name":"RemoveParty","parameters":[{"name":"partyId","type":0}],"isArray":false,"index":31},{"name":"Leaderboard","parameters":[{"name":"name","type":3},{"name":"uid","type":0},{"name":"rank","type":0},{"name":"score","type":4},{"name":"wave","type":0}],"isArray":true,"index":32},{"name":"Failure","parameters":[{"name":"category","type":3},{"name":"reason","type":3},{"name":"x","type":0},{"name":"y","type":0},{"name":"type","type":3}],"isArray":false,"index":33},{"name":"RecallPet","parameters":[],"isArray":false,"index":34},{"name":"LeaveParty","parameters":[],"isArray":false,"index":35},{"name":"KickParty","parameters":[{"name":"uid","type":0}],"isArray":false,"index":36},{"name":"AddDepositToHarvester","parameters":[{"name":"uid","type":0},{"name":"deposit","type":2}],"isArray":false,"index":37},{"name":"CollectHarvester","parameters":[{"name":"uid","type":0}],"isArray":false,"index":38},{"name":"CastSpell","parameters":[{"name":"spell","type":3},{"name":"x","type":1},{"name":"y","type":1},{"name":"tier","type":0}],"isArray":false,"index":39},{"name":"CastSpellResponse","parameters":[{"name":"spell","type":3},{"name":"cooldown","type":0},{"name":"cooldownStartTick","type":0}],"isArray":false,"index":40},{"name":"Spells","parameters":[{"name":"json","type":3}],"isArray":false,"index":41},{"name":"SetPartyList","parameters":[{"name":"partyId","type":0},{"name":"partyName","type":3},{"name":"isOpen","type":0},{"name":"memberCount","type":0}],"isArray":true,"index":42}],"rpcMapsByName":{"Shutdown":{"name":"Shutdown","parameters":[{"name":"reason","type":3},{"name":"shutdownUnix","type":0}],"isArray":false,"index":0},"ReceiveChatMessage":{"name":"ReceiveChatMessage","parameters":[{"name":"displayName","type":3},{"name":"channel","type":3},{"name":"message","type":3},{"name":"uid","type":0}],"isArray":false,"index":1},"SendChatMessage":{"name":"SendChatMessage","parameters":[{"name":"channel","type":3},{"name":"message","type":3}],"isArray":false,"index":2},"Login":{"name":"Login","parameters":[{"name":"token","type":3}],"isArray":false,"index":3},"LoginResponse":{"name":"LoginResponse","parameters":[{"name":"json","type":3}],"isArray":false,"index":4},"AccountSession":{"name":"AccountSession","parameters":[{"name":"json","type":3}],"isArray":false,"index":5},"Metrics":{"name":"Metrics","parameters":[{"name":"minFps","type":2},{"name":"maxFps","type":2},{"name":"currentFps","type":2},{"name":"averageFps","type":2},{"name":"framesRendered","type":2},{"name":"framesInterpolated","type":2},{"name":"framesExtrapolated","type":2},{"name":"allocatedNetworkEntities","type":2},{"name":"currentClientLag","type":2},{"name":"minClientLag","type":2},{"name":"maxClientLag","type":2},{"name":"currentPing","type":2},{"name":"minPing","type":2},{"name":"maxPing","type":2},{"name":"averagePing","type":2},{"name":"longFrames","type":2},{"name":"stutters","type":2},{"name":"group","type":0},{"name":"isMobile","type":0},{"name":"timeResets","type":2},{"name":"maxExtrapolationTime","type":2},{"name":"extrapolationIncidents","type":2},{"name":"totalExtrapolationTime","type":2},{"name":"differenceInClientTime","type":2}],"isArray":false,"index":6},"DayCycle":{"name":"DayCycle","parameters":[{"name":"cycleStartTick","type":0},{"name":"nightEndTick","type":0},{"name":"dayEndTick","type":0},{"name":"isDay","type":0}],"isArray":false,"index":7},"MakeBuilding":{"name":"MakeBuilding","parameters":[{"name":"x","type":1},{"name":"y","type":1},{"name":"type","type":3},{"name":"yaw","type":1}],"isArray":false,"index":8},"BuildingShopPrices":{"name":"BuildingShopPrices","parameters":[{"name":"json","type":3}],"isArray":false,"index":9},"ItemShopPrices":{"name":"ItemShopPrices","parameters":[{"name":"json","type":3},{"name":"json","type":3}],"isArray":false,"index":10},"LocalBuilding":{"name":"LocalBuilding","parameters":[{"name":"x","type":1},{"name":"y","type":1},{"name":"type","type":3},{"name":"dead","type":0},{"name":"uid","type":0},{"name":"tier","type":0}],"isArray":true,"index":11},"Dead":{"name":"Dead","parameters":[{"name":"stashDied","type":0}],"isArray":false,"index":12},"Admin":{"name":"Admin","parameters":[{"name":"password","type":3},{"name":"command","type":3}],"isArray":false,"index":13},"UpgradeBuilding":{"name":"UpgradeBuilding","parameters":[{"name":"uid","type":0}],"isArray":false,"index":14},"DeleteBuilding":{"name":"DeleteBuilding","parameters":[{"name":"uid","type":0}],"isArray":false,"index":15},"BuyItem":{"name":"BuyItem","parameters":[{"name":"itemName","type":3},{"name":"tier","type":0}],"isArray":false,"index":16},"SetItem":{"name":"SetItem","parameters":[{"name":"itemName","type":3},{"name":"tier","type":0},{"name":"stacks","type":0}],"isArray":false,"index":17},"EquipItem":{"name":"EquipItem","parameters":[{"name":"itemName","type":3},{"name":"tier","type":0}],"isArray":false,"index":18},"SetOpenParty":{"name":"SetOpenParty","parameters":[{"name":"isOpen","type":0}],"isArray":false,"index":19},"SetPartyName":{"name":"SetPartyName","parameters":[{"name":"partyName","type":3}],"isArray":false,"index":20},"SetPartyMemberCanSell":{"name":"SetPartyMemberCanSell","parameters":[{"name":"uid","type":0},{"name":"canSell","type":0}],"isArray":false,"index":21},"JoinParty":{"name":"JoinParty","parameters":[{"name":"partyId","type":0}],"isArray":false,"index":22},"JoinPartyByShareKey":{"name":"JoinPartyByShareKey","parameters":[{"name":"partyShareKey","type":3}],"isArray":false,"index":23},"PartyApplicant":{"name":"PartyApplicant","parameters":[{"name":"displayName","type":3},{"name":"applicantUid","type":0}],"isArray":false,"index":24},"PartyApplicantDecide":{"name":"PartyApplicantDecide","parameters":[{"name":"applicantUid","type":0},{"name":"accepted","type":0}],"isArray":false,"index":25},"PartyApplicantDenied":{"name":"PartyApplicantDenied","parameters":[],"isArray":false,"index":26},"PartyApplicantExpired":{"name":"PartyApplicantExpired","parameters":[{"name":"applicantUid","type":0}],"isArray":false,"index":27},"PartyShareKey":{"name":"PartyShareKey","parameters":[{"name":"partyShareKey","type":3}],"isArray":false,"index":28},"PartyInfo":{"name":"PartyInfo","parameters":[{"name":"playerUid","type":0},{"name":"displayName","type":3},{"name":"isLeader","type":0},{"name":"canSell","type":0}],"isArray":true,"index":29},"AddParty":{"name":"AddParty","parameters":[{"name":"partyId","type":0},{"name":"partyName","type":3},{"name":"isOpen","type":0},{"name":"memberCount","type":0}],"isArray":false,"index":30},"RemoveParty":{"name":"RemoveParty","parameters":[{"name":"partyId","type":0}],"isArray":false,"index":31},"Leaderboard":{"name":"Leaderboard","parameters":[{"name":"name","type":3},{"name":"uid","type":0},{"name":"rank","type":0},{"name":"score","type":4},{"name":"wave","type":0}],"isArray":true,"index":32},"Failure":{"name":"Failure","parameters":[{"name":"category","type":3},{"name":"reason","type":3},{"name":"x","type":0},{"name":"y","type":0},{"name":"type","type":3}],"isArray":false,"index":33},"RecallPet":{"name":"RecallPet","parameters":[],"isArray":false,"index":34},"LeaveParty":{"name":"LeaveParty","parameters":[],"isArray":false,"index":35},"KickParty":{"name":"KickParty","parameters":[{"name":"uid","type":0}],"isArray":false,"index":36},"AddDepositToHarvester":{"name":"AddDepositToHarvester","parameters":[{"name":"uid","type":0},{"name":"deposit","type":2}],"isArray":false,"index":37},"CollectHarvester":{"name":"CollectHarvester","parameters":[{"name":"uid","type":0}],"isArray":false,"index":38},"CastSpell":{"name":"CastSpell","parameters":[{"name":"spell","type":3},{"name":"x","type":1},{"name":"y","type":1},{"name":"tier","type":0}],"isArray":false,"index":39},"CastSpellResponse":{"name":"CastSpellResponse","parameters":[{"name":"spell","type":3},{"name":"cooldown","type":0},{"name":"cooldownStartTick","type":0}],"isArray":false,"index":40},"Spells":{"name":"Spells","parameters":[{"name":"json","type":3}],"isArray":false,"index":41},"SetPartyList":{"name":"SetPartyList","parameters":[{"name":"partyId","type":0},{"name":"partyName","type":3},{"name":"isOpen","type":0},{"name":"memberCount","type":0}],"isArray":true,"index":42}}}'
    const onMessage2 = (event) => {
        game.network.emitter.emit(e_PacketId[event.opcode], event);
    };
    let urlObj = {
        localhost: "ws://localhost:8080",
    }
    let proxies = {};
    let prfKeys = {};
    Object.keys(urlObj).forEach(e => {
        proxies[e] = [""];
        prfKeys[e] = [""];
    })
    window.allSessions = {};
    window.allSessionsByUid = {};
    window.sesPsk = "";
    window.setElementToggleTo = (enabled, classname) => {
        if (!enabled) {
            document.getElementsByClassName(classname)[0].innerText = document.getElementsByClassName(classname)[0].innerText.replace("Disable", "Enable");
            document.getElementsByClassName(classname)[0].className = document.getElementsByClassName(classname)[0].className.replace("red", "blue");
        } else {
            document.getElementsByClassName(classname)[0].innerText = document.getElementsByClassName(classname)[0].innerText.replace("Enable", "Disable");
            document.getElementsByClassName(classname)[0].className = document.getElementsByClassName(classname)[0].className.replace("blue", "red");
        }
    }
    let enableOnlyOnce = false;
    window.enableMenuFiller = () => {
        if (!enableOnlyOnce) {
            enableOnlyOnce = true;
            for (let i = 0; i < 4; i++) {
                window.sendMenuAlt(1, Object.values(game.options.servers)[game.ui.components.Intro.serverElem.selectedIndex < 47 ? ++game.ui.components.Intro.serverElem.selectedIndex : game.ui.components.Intro.serverElem.selectedIndex = 0].id);
            }
            setInterval(() => {
                for (let i = 0; i < 4; i++) {
                    window.sendMenuAlt(1, Object.values(game.options.servers)[game.ui.components.Intro.serverElem.selectedIndex < 47 ? ++game.ui.components.Intro.serverElem.selectedIndex : game.ui.components.Intro.serverElem.selectedIndex = 0].id);
                }
            }, 10000);
        }
    }
    class Ws {
        constructor(type) {
            this.ws = new WebSocket(urlObj[document.getElementsByClassName("dropdown")[0].value.toLowerCase()]);
            this.ws.binaryType = "arraybuffer";
            this.type = type || "user";
            this.userId = null;
            this.ws.onopen = this.onOpen.bind(this);
        }
        encode(e) {
            return e;
        }
        decode(e) {
            return new TextDecoder().decode(e);
        }
        sendMessage(m) {
            this.ws.readyState == 1 && this.ws.send(this.encode(m));
        }
        onOpen() {
            this.sendMessage("plsverify");
        }
    }

    class User extends Ws {
        constructor() {
            super("user");
            this.activeSessions = {};
            this.ws.onmessage = this.onMessage.bind(this);
            this.ws.onclose = this.onClose.bind(this);
            this.notAllowedCharsInHTML = new Map([["<", '&lt;'], [">", '&gt;']]);
        }
        onMessage(m) {
            let x = new Uint8Array(m.data);
            if (x[0] == 0 || x[0] == 9) {
                let obj = game.network.codec.decode(x);
                if (obj.opcode == 0) {
                    onMessage2(obj);
                }
                if (obj.opcode == 9) {
                    onMessage2(obj);
                }
                return;
            }
            let msg = this.decode(m.data);
            if (msg.startsWith("encodeyounoob")) {
                let oldVal = document.getElementsByClassName("dropdown")[1].value;
                let sesProxies = proxies[document.getElementsByClassName("dropdown")[0].value.toLowerCase()];
                if (!sesProxies.includes(oldVal)) {
                    oldVal = null;
                };
                document.getElementsByClassName("dropdown")[1].innerHTML = "";
                for (const proxyName of sesProxies) {
                    document.getElementsByClassName("dropdown")[1].innerHTML += `<option>${proxyName}</option>`
                };
                document.getElementsByClassName("dropdown")[1].value = oldVal || sesProxies[0];
                let pskVal = document.getElementsByClassName("dropdown")[2].value;
                let sesKeys = prfKeys[document.getElementsByClassName("dropdown")[0].value.toLowerCase()];
                if (!sesKeys.includes(pskVal)) {
                    pskVal = null;
                };
                document.getElementsByClassName("dropdown")[2].innerHTML = "";
                for (const key of sesKeys) {
                    document.getElementsByClassName("dropdown")[2].innerHTML += `<option>${key}</option>`
                };
                document.getElementsByClassName("dropdown")[2].value = pskVal || sesKeys[0];
                let encoded = this.cipher(";I%;!Rdr6c3cv!T91v2k5w)eI-G#427jC(gZaCMcmbN4nlhFAf")(msg.split(",  ;")[1]);
                this.sendMessage(`decodednoob,  ;${encoded}`);
            }
            if (msg == "accesssuccess") {
                this.sendMessage(`${this.type},  ;${document.getElementsByClassName("dropdown")[1].value.replace(" ", "")}`);
            }
            if (msg.startsWith("id")) {
                this.userId = parseInt(msg.split(",  ;")[1]);
            }
            if (msg.startsWith("sessions")) {
                let args = msg.split(",  ;");
                this.activeSessions = JSON.parse(args[1]);
                document.getElementsByClassName("savedsessions")[0].innerHTML = "";
                Object.values(this.activeSessions).sort((a,b) => a.sessionUserId - b.sessionUserId).forEach(e => {
                    document.getElementsByClassName("savedsessions")[0].innerHTML += `<button onclick="user.verify(${e.actualUserId})">${e.sessionName ? this.Sanitize(e.sessionName) : "Session"} [${e.actualUserId} | ${e.sessionUserId}]</button><br>`
                });
            }
            if (msg.startsWith("data")) {
                let obj = JSON.parse(msg.split(",  ;")[1]);
                if (obj.opcode == 0) {
                    onMessage2({tick: obj.tick, entities: new Map(obj.entities), byteSize: obj.byteSize, opcode: obj.opcode});
                }
                if (obj.opcode == 9) {
                    onMessage2(obj);
                }
            }
            if (msg.startsWith("verifydata")) {
                let args = msg.split(",  ;").slice(1).join(",  ;");
                let data = JSON.parse(args);
                let codec = JSON.parse(codecJSON);
                for (let i in codec) {
                    game.network.codec[i] = codec[i];
                }
                game.network.codec.sortedUidsByType = data.sortedUidsByType;
                game.network.codec.removedEntities = data.removedEntities;
                game.network.codec.absentEntitiesFlags = data.absentEntitiesFlags;
                game.network.codec.updatedEntityFlags = data.updatedEntityFlags;
                game.network.socket = {
                    readyState: 1
                };
                game.network.socket.send = (e) => this.sendBuffer(new Uint8Array(e));
                game.network.sendPacket = (e, t) => {
                    if (e == 4 || e == 5 || e == 6 || e == 7) return;
                    this.sendPacket(e, t);
                }
                game.options.serverId = data.serverId;
                game.network.connectionOptions = game.options.servers[data.serverId];
                if (data.useRequiredEquipment) {
                    document.useRequiredEquipment = true;
                }
                if (data.petActivated) {
                    window.activated = true;
                }
                for (let i = 0; i < jsons.length; i++) {
                    onMessage2(jsons[i]);
                }
                for (let i = 0; i < data.syncNeeds.length; i++) {
                    onMessage2(data.syncNeeds[i]);
                }
                for (let i = 0; i < data.messages.length; i++) {
                    game.ui.components.Chat.onMessageReceived(data.messages[i]);
                }
                if (data.castSpellResponse && data.castSpellResponse.cooldownStartTick && (data.tick - data.castSpellResponse.cooldownStartTick) * 50 < 240000) {
                    onMessage2({name: 'CastSpellResponse', response: data.castSpellResponse, opcode: 9});
                }
                if (data.isPaused) {
                    game.ui.onLocalItemUpdate({itemName: 'Pause', tier: 1, stacks: 1});
                    game.ui.emit('wavePaused');
                }
                for (let i in data.inventory) {
                    onMessage2({name: "SetItem", response: {itemName: data.inventory[i].itemName, tier: data.inventory[i].tier, stacks: data.inventory[i].stacks}, opcode: 9});
                }
                onMessage2({tick: data.tick, entities: new Map(data.entities), byteSize: data.byteSize, opcode: 0});
                onMessage2({name: "LocalBuilding", response: data.localBuildings, opcode: 9});
                if (new Map(data.entities).get(data.syncNeeds[0].uid).dead) {
                    game.ui.components.Respawn.respawnTextElem.innerHTML = "You got killed... but fear not &mdash; your fortress survives! Get back into the action!";
                    game.ui.components.Respawn.show();
                }
            }
            if (msg.startsWith("decodedOpcode5")) {
                this.onDecodedOpcode5(msg);
            }
            if (msg.startsWith("leaderboarddata")) {
                console.log(JSON.parse(msg.split(",  ;").slice(1).join(",  ;")));
            }
            if (msg.startsWith("altstats")) {
                allSessions[JSON.parse(msg.split(",  ;")[2])] = JSON.parse(msg.split(",  ;")[1]);
                allSessions[JSON.parse(msg.split(",  ;")[2])].mouseDownHit = JSON.parse(msg.split(",  ;")[3]);
                allSessions[JSON.parse(msg.split(",  ;")[2])].isOnControl = JSON.parse(msg.split(",  ;")[4]);
                allSessions[JSON.parse(msg.split(",  ;")[2])].readyState = JSON.parse(msg.split(",  ;")[5]);
                allSessions[JSON.parse(msg.split(",  ;")[2])].serverId = JSON.parse(msg.split(",  ;")[6]);
                allSessions[JSON.parse(msg.split(",  ;")[2])].target = JSON.parse(msg.split(",  ;")[7]);
                allSessions[JSON.parse(msg.split(",  ;")[2])].gs = JSON.parse(msg.split(",  ;")[8]);
                for (let i in allSessions) {
                    allSessionsByUid[allSessions[i].uid] = allSessions[i];
                }
            }
            if (msg.startsWith("joinid")) {
                sesPsk = JSON.stringify(msg.split(",  ;")[1]);
                game.network.sendPacket(9, {name: "JoinPartyByShareKey", partyShareKey: JSON.parse(sesPsk)});
            }
            if (msg.startsWith("proxies")) {
                let msg2 = msg.slice(11, msg.length).split(",");
                proxies[document.getElementsByClassName("dropdown")[0].value.toLowerCase()] = [""];
                msg2.forEach(m => {
                    msg.split(",  ;")[1] != "" && proxies[document.getElementsByClassName("dropdown")[0].value.toLowerCase()].push(m);
                });
            }
            if (msg.startsWith("prfpsks")) {
                let msg2 = msg.slice(11, msg.length).split(",");
                prfKeys[document.getElementsByClassName("dropdown")[0].value.toLowerCase()] = [""];
                msg2.forEach(m => {
                    msg.split(",  ;")[1] != "" && prfKeys[document.getElementsByClassName("dropdown")[0].value.toLowerCase()].push(m);
                });
            }
            if (msg.startsWith("sessionclosed")) {
                let id = msg.split(",  ;")[1];
                if (allSessions[id]) {
                    delete allSessionsByUid[allSessions[id].uid];
                    delete allSessions[id];
                }
            }
        }
        verify(id) {
            this.sendMessage(`verify,  ;${id}`);
            this.connectedToId = id;
        }
        sendPacket(opcode, data) {
            let buffer = new Uint8Array(game.network.codec.encode(opcode, data));
            let arr = [1];
            for (let i = 0; i < buffer.length; i++) {
                arr.push(buffer[i]);
            }
            this.ws.readyState == 1 && this.ws.send(new Uint8Array(arr));
        }
        sendBuffer(buffer) {
            let arr = [2];
            for (let i = 0; i < buffer.length; i++) {
                arr.push(buffer[i]);
            }
            this.ws.readyState == 1 && this.ws.send(new Uint8Array(arr));
        }
        createSession(sessionname, name, sid, psk, proxy) {
            this.sendMessage(`createsession,  ;${sessionname},  ;${name},  ;${sid},  ;${psk},  ;${proxy.replace(" ", "")}`);
        }
        getSessions() {
            this.sendMessage("getsessions");
        }
        disconnect() {
            this.ws.close();
        }
        closeSession(id) {
            this.sendMessage("closesession,  ;" + id);
        }
        reconnect(id = this.connectedToId, closed) {
            !closed && (this.reconnecting = true);
            this.disconnect();
            if (document.getElementsByClassName("dropdown")[0].value.toLowerCase() == "localhost") return;
            this.ws = new Ws().ws;
            this.ws.onopen = this.onOpen.bind(this);
            this.ws.onmessage = this.onMessage.bind(this);
            this.ws.onclose = this.onClose.bind(this);
            this.ws.addEventListener("open", () => {
                this.verify(id);
            })
        }
        onClose() {
            if (this.reconnecting) {
                this.reconnecting = false;
                return;
            }
            setTimeout(() => {
                this.reconnect(this.connectedToId, true);
            }, 1000);
        }
        Sanitize(e) {
            let text = "";
            for (let i = 0; i < e.length; i++) {
                this.notAllowedCharsInHTML.has(e[i]) ? text += this.notAllowedCharsInHTML.get(e[i]) : text += e[i];
            }
            return text;
        }
        cipher(salt) {
            const textToChars = text => text.split('').map(c => c.charCodeAt(0));
            const byteHex = n => ("0" + Number(n).toString(16)).substr(-2);
            const applySaltToChar = code => textToChars(salt).reduce((a,b) => a ^ b, code);
            return text => text.split('').map(textToChars).map(applySaltToChar).map(byteHex).join('');
        }
        changePassword(password) {
            this.sendMessage("changehasaccess,  ;" + password);
        }
        getLeaderboardData() {
            this.sendMessage("getleaderboarddata");

        }
    }
    let sendSession = () => {
        user.createSession(document.getElementsByClassName("sessionsessionname")[0].value, document.getElementsByClassName("sessionname")[0].value, document.getElementsByClassName("sessionsid")[0].value, document.getElementsByClassName("sessionpsk")[0].value, document.getElementsByClassName("dropdown")[1].value);
    }
    let enableAutoBreakIn = () => {
        user.sendMessage(`eabi,  ;${document.getElementsByClassName("sessionsid")[0].value}`);
        sendSession();
    }
    let disableAutoBreakIn = () => {
        user.sendMessage(`dabi,  ;${document.getElementsByClassName("sessionsid")[0].value}`);
    }
    let enableAutoRefiller = () => {
        user.sendMessage(`esrf,  ;${document.getElementsByClassName("sessionsid")[0].value},  ;${document.getElementsByClassName("dropdown")[1].value == "" ? "." : document.getElementsByClassName("dropdown")[1].value}`);
        sendSession();
    }
    let disableAutoRefiller = () => {
        user.sendMessage(`dsrf,  ;${document.getElementsByClassName("sessionsid")[0].value},  ;${document.getElementsByClassName("dropdown")[1].value == "" ? "." : document.getElementsByClassName("dropdown")[1].value}`);
    }
    let closeSession = () => {
        let id = parseInt(document.getElementsByClassName("closesessioninput")[0].value);
        id in user.activeSessions && user.closeSession(document.getElementsByClassName("closesessioninput")[0].value);
    }
    let changesessionname = () => {
        let id = parseInt(document.getElementsByClassName("changesessionnameinput")[0].value);
        let name = document.getElementsByClassName("changesessionnameinput2")[0].value;
        user.sendMessage(`changesessionname,  ;${id},  ;${name}`);
    }
    let changesessionid = () => {
        let id = parseInt(document.getElementsByClassName("changesessionidinput")[0].value);
        let name = document.getElementsByClassName("changesessionidinput2")[0].value;
        user.sendMessage(`changesessionid,  ;${id},  ;${name}`);
    }
    let enablePartyRefiller = () => {
        let sid = document.getElementsByClassName("prfsid")[0].value;
        user.sendMessage(`eafp,  ;${sid}`);
    }
    let disablePartyRefiller = () => {
        let sid = document.getElementsByClassName("prfsid")[0].value;
        user.sendMessage(`dafp,  ;${sid}`);
    }
    let addPartyRefillerKey = () => {
        let sid = document.getElementsByClassName("prfsid")[0].value;
        let psk = document.getElementsByClassName("prfpsk")[0].value;
        user.sendMessage(`addafpsk,  ;${psk},  ;${sid}`);
        user.reconnect();
    }
    let removePartyRefillerKey = () => {
        let sid = document.getElementsByClassName("prfsid")[0].value;
        let psk = document.getElementsByClassName("prfpsk")[0].value;
        user.sendMessage(`removeafpsk,  ;${psk},  ;${sid}`);
        user.reconnect();
    }
    let changeSession = () => {
        user.reconnect();
    };
    document.getElementsByClassName("hud-intro-play")[2].onclick = () => {
        user.createSession(document.getElementsByClassName("sessionsessionname")[0].value, document.getElementsByClassName("hud-intro-name")[0].value, document.getElementsByClassName("hud-intro-server")[0].value, document.getElementsByClassName("sessionpsk")[0].value, document.getElementsByClassName("dropdown")[1].value);
    }
    document.getElementsByClassName("session_saver")[0].innerHTML = `
    <h3>Session Saver</h3>
    <input class="btn sessionsessionname" value="Session" type="text" placeholder="session name" maxlength="20">
    <button class="btn autobreakinon" style="width: 37.5%" onclick="enableAutoBreakIn();">Enable Auto Break In</button>
    <input class="btn sessionname" value="Player" type="text" placeholder="name">
    <button class="btn autobreakinoff" style="width: 37.5%" onclick="disableAutoBreakIn();">Disable Auto Break In</button>
    <input class="btn sessionsid" value="v5001" type="text" placeholder="server id">
    <button class="btn autorefilleron" style="width: 37.5%" onclick="enableAutoRefiller();">Enable Auto Refiller</button>
    <input class="btn sessionpsk" value="putpartysharekeyhere" type="text" placeholder="party share key" maxlength="20"> 
    <button class="btn autorefilleroff" style="width: 37.5%" onclick="disableAutoRefiller();">Disable Auto Refiller</button>
    <br><br><hr><br>
    <input class="btn prfsid" value="v5001" style="width: 42.25%" type="text" placeholder="server id" maxlength="5">
    <input class="btn prfpsk" value="putpartysharekeyhere" style="width: 37.5%" type="text" placeholder="party share key" maxlength="20">
    <button class="btn addautofillkey" style="width: 42.25%" onclick="addPartyRefillerKey();">Add Party Refiller Key</button>
    <button class="btn enableautofillpsk" style="width: 37.5%" onclick="enablePartyRefiller();">Enable Party Refiller</button>
    <button class="btn removeautofillkey" style="width: 42.25%" onclick="removePartyRefillerKey();">Delete Party Refiller Key</button>
    <button class="btn disableautofillpsk" style="width: 37.5%" onclick="disablePartyRefiller();">Disable Party Refiller</button>
    <br><br><hr><br>
    <input class="btn closesessioninput" style="width: 29.25%" type="number" placeholder="ses id">
    <button class="btn sendsession" onclick="sendSession();">Send Session</button>
    <button class="btn closesession" onclick="closeSession();">Close Session</button>
    <br><br><hr><br>
    <input class="btn changesessionnameinput" style="width: 19.375%" type="number" placeholder="ses id">
    <input class="btn changesessionnameinput2" style="width: 19.375%" type="text" placeholder="ses name">
    <button class="btn changesessionname" style="width: 40%" onclick="changesessionname();">Change Session Name</button>
    <input class="btn changesessionidinput" style="width: 21.875%" type="number" placeholder="ses id">
    <input class="btn changesessionidinput2" style="width: 21.875%" type="number" placeholder="newest id">
    <button class="btn changesessionid" style="width: 35%" onclick="changesessionid();">Change Session Id</button>
    `;
    let user = new User();
    document.getElementsByClassName("hud-intro-left")[0].setAttribute("style", "width: 510px; height: 400px; margin-top: 15px; overflow: auto; float: margin-right: 100px;");
    const directCmds = new Set(
        [
            "arn", "ahhl", "ab", "au", "atb",
            "apr", "aph", "pt", "rpt", "aaz", "ahrc",
            "pl", "ape", "arc", "ua", "amt", "sa", "aa",
            "aws", "aad", "eat"
        ]
    );

    const conditionalCmds = new Set(["uth", "sbt", "mpt", "hth", "ap"]);

    const nonToggleCmds = new Set(["lock", "sbtpos"]);

    const cmdHandler = msg => {
        const toggle = msg.startsWith("##") ? false : msg.startsWith("#") ? true : null;
        if (toggle === null) return;
        const args = msg.substr(1 + !toggle | 0).split(" ");
        const cmd = args[0];
        if (directCmds.has(cmd)) {
            user.sendMessage((toggle ? "e" : "d") + cmd);
            return;
        }
        if (conditionalCmds.has(cmd)) {
            if (toggle) {
                switch(cmd) {
                    case "uth":
                        user.sendMessage("e" + cmd + ",  ;" + (args[1] || 35) + ",  ;" + (args[2] || false) + ",  ;" + (args[3] || 600));
                    break;
                    case "sbt":
                        user.sendMessage("e" + cmd + ",  ;" + (args[1] || 105) + ",  ;" + (args[2] || 110));
                    break;
                    case "mpt":
                        user.sendMessage("e" + cmd + ",  ;" + (args[1] || "") + ",  ;" + (args[2] || "") + ",  ;" + (args[3] || "") + ",  ;" + (args[4] || ""));
                    break;
                    case "hth":
                        user.sendMessage("e" + cmd + ",  ;" + (args[1] || 50));
                    break;
                    case "ap":
                        user.sendMessage("e" + cmd + ",  ;" + (args[1] || 150));
                    break;
                }
            } else {
                user.sendMessage("d" + cmd);
            }
            return;
        }
        if (nonToggleCmds.has(cmd)) {
            switch(cmd) {
                case "lock":
                    user.sendMessage(cmd + ",  ;" + args[1] + " " + args[2]);
                break;
                case "sbtpos":
                    user.sendMessage(cmd);
                break;
            }
            return;
        }
    }
    game.network.sendRpc3 = game.network.sendRpc;
    game.network.sendRpc = e => {
        if (e.name == "SendChatMessage") {
            if (e.message.startsWith("#")) {
                cmdHandler(e.message);
            }
        }
        game.network.sendRpc3(e);
    };
    verifiedUids = {};
</script>
<script src="script.js"></script>
<script src="seeallspots.js"></script>
</body>
</html>

